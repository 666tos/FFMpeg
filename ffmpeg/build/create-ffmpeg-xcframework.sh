#!/bin/sh

CURRENT_FOLDER=`pwd`
FRAMEWORK_NAME="FFmpeg"

FRAMEWORK_EXT=".framework"
FRAMEWORK="$FRAMEWORK_NAME$FRAMEWORK_EXT"

XCFRAMEWORK_EXT=".xcframework"
XCFRAMEWORK="$FRAMEWORK_NAME$XCFRAMEWORK_EXT"

BUILD_FOLDER_IOS="$CURRENT_FOLDER/FFmpeg-iOS"
BUILD_FOLDER_MACOS="$CURRENT_FOLDER/FFmpeg-OSX"
BUILD_FOLDER_TVOS="$CURRENT_FOLDER/FFmpeg-tvOS"
BUILD_FOLDER_MACCATALYST="$CURRENT_FOLDER/FFmpeg-maccatalyst"
OUTPUT_FOLDER="$CURRENT_FOLDER/$FRAMEWORK"

XCODE_PATH=$(xcode-select -p)

echo "$BUILD_FOLDER_MACCATALYST/$FRAMEWORK"

#	-framework "$BUILD_FOLDER_IOS/$FRAMEWORK" \
#	-framework "$BUILD_FOLDER_MACOS/$FRAMEWORK" \
#	-framework "$BUILD_FOLDER_TVOS/$FRAMEWORK" \

xcodebuild -create-xcframework \
	-framework "$BUILD_FOLDER_IOS/$FRAMEWORK" \
	-framework "$BUILD_FOLDER_MACCATALYST/$FRAMEWORK" \
	-output "$XCFRAMEWORK"

